import{j as e,R as n,o as I,p as k,w as x,c as y}from"./Firebase-2ff8094c.js";function D(a){return e.jsxs("header",{children:[e.jsxs("div",{id:"header",className:"header",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"Find your film"}),e.jsxs("p",{children:[e.jsx("a",{href:"/watchlist.html",children:"My watchlist"}),e.jsx("span",{id:"num-span",children:a.savedMovie.length})]})]}),e.jsx("i",{id:"mode",onClick:a.toggle,className:"fa-solid fa-moon"})]}),e.jsx("div",{className:"input-btn",children:e.jsxs("form",{onSubmit:a.getMovieList,children:[e.jsx("i",{className:"fa-solid fa-magnifying-glass search-icon"}),e.jsx("input",{id:"text",type:"text",name:"search",className:"search-input",value:a.input,onChange:i=>a.handleSearch(i),placeholder:"Search for a movie"}),e.jsx("button",{id:"search-btn",className:"search-btn",children:"Search"})]})})]})}function R(a){return a.movieInfo.map(i=>{const l=a.savedMovie.find(d=>d[1].imdbID===i.imdbID);return e.jsxs("div",{className:"movie-box",children:[e.jsx("img",{className:"poster",src:i.Poster}),e.jsxs("div",{className:"data-container",children:[e.jsxs("h3",{children:[i.Title,e.jsxs("span",{children:[e.jsx("i",{className:"fa-solid fa-star star"}),i.imdbRating]})]}),e.jsxs("div",{className:"rgw-flex",children:[e.jsx("p",{children:i.Runtime}),e.jsx("p",{className:"runtime",children:i.Genre}),e.jsx("div",{className:"add-watchlist",children:i.isAdded||l?e.jsxs("p",{className:"watchlist",children:["Added to watchlist",e.jsx("i",{className:"fa-solid fa-circle-check"})]}):e.jsxs("div",{children:[e.jsx("i",{className:"fa-solid fa-circle-plus plus-icon",onClick:()=>a.findMovie(i.imdbID)}),e.jsx("br",{}),e.jsx("p",{className:"watchlist",onClick:()=>a.findMovie(i.imdbID),children:"Add to Watchlist"})]})})]}),e.jsx("p",{className:"plot",children:i.Plot})]})]},i.imdbID)})}function T(){const[a,i]=n.useState(!1),[l,d]=n.useState(""),[j,v]=n.useState(0),[m,f]=n.useState([]),[o,r]=n.useState([]),[u,p]=n.useState([]);function b(){i(s=>!s)}function N(s){d(s.target.value)}n.useEffect(()=>{I(x,function(s){if(s.exists()){let t=Object.entries(s.val());p(t)}})},[]);function g(s){s.preventDefault(),v(t=>t+1),f([]),r([])}function M(s){o.find(t=>t.imdbID===s&&k(x,t)),r(t=>t.map(c=>c.imdbID===s?{...c,isAdded:!0}:c))}n.useEffect(()=>{fetch(`https://www.omdbapi.com/?s=${l}&apikey=786c1d7b`).then(s=>s.json()).then(s=>{let t=s.Search?s.Search.map(h=>h.Title):[],c=t.filter((h,S)=>t.indexOf(h)===S);f(c)})},[j]),n.useEffect(()=>{m.map(s=>{fetch(`https://www.omdbapi.com/?t=${s}&apikey=786c1d7b`).then(t=>t.json()).then(t=>{t.Response==="True"&&r(c=>[...c,t])})})},[m]);const w={backgroundColor:a&&"black",color:a&&"white"};return e.jsxs("div",{children:[e.jsx(D,{input:l,handleSearch:N,toggle:b,getMovieList:g,savedMovie:u}),e.jsx("div",{id:"movie-section",className:"movie-section",style:w,children:o.length>0?e.jsx(R,{movieInfo:o,findMovie:M,savedMovie:u,darkMode:a}):e.jsxs("div",{className:"explore",children:[e.jsx("i",{className:"fa-solid fa-film movie-icon"}),e.jsx("p",{className:"movie-icon-label",children:"Start exploring"})]})})]})}const A=y.createRoot(document.getElementById("root"));A.render(e.jsx(T,{}));
